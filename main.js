(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){const t=[],n=[],r=[];return{name:e,hits:t,misses:n,occupied:r,receiveAttack:e=>{r.includes(e)?t.push(e):n.push(e)},allSunk:()=>r.length===t.length,newShip:e=>{if(e.some(e=>r.includes(e)))return"Coordinate(s) already occupied";r.push(...e)}}}e.d({},{vv:()=>c});const n=e=>{var t,n,r,a,o,l;const i=[];let d=0;for(let e=0;e<10;e++){i.push([]);for(let t=0;t<10&&d<100;t++)i[e].push(d),d++}const c=Math.floor(e/10),s=i[c].findIndex(t=>t===e);return{right:i[c][s+1],left:i[c][s-1],top:null===(t=i[c-1])||void 0===t?void 0:t[s],bottom:null===(n=i[c+1])||void 0===n?void 0:n[s],topleft:null===(r=i[c-1])||void 0===r?void 0:r[s-1],topright:null===(a=i[c-1])||void 0===a?void 0:a[s+1],bottomleft:null===(o=i[c+1])||void 0===o?void 0:o[s-1],bottomright:null===(l=i[c+1])||void 0===l?void 0:l[s+1]}};function r(){const e=[...Array.from({length:10},(e,t)=>Array.from({length:10},(e,n)=>`${t+1},${n+1}`)).flat()];let t=null;const r=(t,n)=>{if(!e.includes(n))return"That move is not available";t.receiveAttack(n);const r=e.indexOf(n);r>-1&&e.splice(r,1)};return{attack:r,playerMove:(t,n)=>{const a=t.target.id.slice(1);e.includes(a)&&r(n,a)},computerMove:r=>{if(null===t){const n=e[Math.floor(Math.random()*e.length)];r.receiveAttack(n),t=r.hits.includes(n)?e.indexOf(n):null;const a=e.indexOf(n);a>-1&&e.splice(a,1)}else{const a=n(t),o=Object.values(a).slice(0,4).filter(e=>void 0!==e),l=o[Math.floor(Math.random()*o.length)],i=e[l];r.receiveAttack(i),t=r.hits.includes(i)?e.indexOf(i):null;const d=e.indexOf(i);d>-1&&e.splice(d,1)}},availableMoves:e,lastHitIndex:t}}function a(e){switch(e){case"C":return"carrier";case"B":return"battleship";case"D":return"destroyer";case"P":return"patrolboat";default:return""}}function o(){return{playerGrid:document.getElementById("playerGrid"),playerHeader:document.getElementById("playerHeader"),computerGrid:document.getElementById("computerGrid"),computerHeader:document.getElementById("computerHeader"),start:document.getElementById("start"),heading:document.querySelector("h1"),infoBox:document.getElementById("info"),winnerText:document.getElementById("winner")}}function l(e){const{infoBox:t}=o(),n=e.target;e.dataTransfer&&(e.dataTransfer.setData("text",n.id),e.dataTransfer.setData("text/class",Array.from(n.classList).toString())),t&&(t.textContent="Place your ships on the grid. Click to rotate ship")}function i(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}function d(e){var t;e.preventDefault();const{infoBox:n}=o();if(!e.dataTransfer)return null;const r=e.target,a=e.dataTransfer.getData("text"),l=e.dataTransfer.getData("text/class"),i=document.getElementById(a);if(!i||!(null===(t=null==r?void 0:r.id)||void 0===t?void 0:t.startsWith("p")))return null;const d=i.children.length,[c,s]=r.id.slice(1).split(","),u=parseInt(c,10),p=parseInt(s,10),f=l.includes("vertical");for(let e=0;e<d;e++){const t=`p${f?u+e:u},${f?p:p+e}`,r=document.getElementById(t);if(!(null==r?void 0:r.parentNode))return n&&(n.textContent="Boat cannot be placed there!"),i.draggable=!1,i.draggable=!0,null;i.children[0].id=t,r.parentNode.replaceChild(i.children[0],r)}return[]}function c(){const{player:e,computer:n,playerBoard:c,computerBoard:s}={player:r(),computer:r(),playerBoard:t("Player"),computerBoard:t("Computer")};(function(e){const{infoBox:t,computerGrid:n}=o();if(!n||!t)return;let r=document.getElementById("boatsDisplay");r?r.innerHTML="":(r=document.createElement("div"),r.id="boatsDisplay",n.appendChild(r)),n.className="",function(e){const{playerGrid:t,playerHeader:n}=o();if(t&&n){t.innerHTML="";for(let n=0;n<100;n++){let r=document.createElement("div");r.className="square pSquare",r.id=`p${e.availableMoves[n]}`,r.addEventListener("dragover",i),r.addEventListener("drop",e=>d(e)),t.appendChild(r)}n.textContent="Player"}}(e),t.textContent="Place your ships on the grid. Click to rotate ship";const l=[["C","C","C","C","C"],["B","B","B","B"],["B","B","B","B"],["D","D","D"],["D","D","D"],["D","D","D"],["P","P"],["P","P"],["P","P"],["P","P"]];for(let e=0;e<l.length;e++){const t=document.createElement("div"),n=l[e][0];t.className=`boat ${a(n)}`,t.id=`${a(n)}${e}`;for(let r=0;r<l[e].length;r++){const e=document.createElement("div");e.className=`boatSquare ${a(n)}Square`,e.draggable=!1,t.appendChild(e)}r.appendChild(t)}})(e),function(){const e=document.getElementsByClassName("boat");for(let t=0;t<e.length;t++){const n=e[t];n.draggable=!0,n.addEventListener("dragstart",l),n.addEventListener("click",()=>{n.classList.toggle("vertical")})}}()}!function(){const{start:e,heading:t,infoBox:n}=o();e.addEventListener("click",function(){"Start Game"===e.textContent?(e.textContent="Restart Game",t.classList.remove("large"),n.style.display="block",c()):window.location.reload()})}()})();
//# sourceMappingURL=main.js.map